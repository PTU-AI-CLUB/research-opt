{% extends 'base.html' %}

{% block title %}
research.ai - ResOpt & Chatbot
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-9">
        <h1>ResOpt (Researching Optimized)</h1>
        <p>
            Upload your research document and click 'Opt' to optimize your studying experience.
        </p>
        
        <form action="/res_opt_file_upload" method="post" enctype="multipart/form-data">
            <div class="form-group row">
                <div class="col-md-6">
                    <label for="researchDoc">Upload Your Research Document:</label>
                    <input type="file" class="form-control-file" id="researchDoc" name="researchDoc" accept=".pdf" required>
                </div>
                <div class="col-md-6">
                    <button type="submit" class="btn btn-primary mt-4">Opt</button>
                </div>
            </div>
        </form>
        
        <div class="mt-4">
            {% if extracted_text %}
                <h2>Extracted Text:</h2>
                <pre>{{ extracted_text }}</pre>
            {% endif %}
        </div>
    </div>

    <div class="col-md-3">
        <div class="chatbot-container">
            <!-- Chatbot UI -->
            <h3>Chatbot</h3>
            <div class="chat-container">
                {% if messages %}
                    {% for user, bot in messages %}
                        <p>User: {{ user }} </p>
                        <p>Bot: {{ bot }} </p>
                    {% endfor %}
                {% endif %}
            </div>
            <form action="/chat_message" method="post">
                <div class="form-group">
                    <input type="text" class="form-control" id="messageInput" name="messageInput" placeholder="Type your message">
                </div>
                <button type="submit" class="btn btn-primary">Send</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
